{"version":3,"sources":["webpack:///./hbs/imageLayout.hbs","webpack:///./js/createMarkup.js","webpack:///./js/model.js"],"names":["Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","tags","largeImageURL","likes","views","comments","downloads","useData","createMarkup","item","imageLayout","keyword","refs","targetform","document","querySelector","targetGallery","msnry","Masonry","itemSelector","columnWidth","percentPosition","stagger","transitionDuration","visibleStyle","transform","opacity","hiddenStyle","infScroll","InfiniteScroll","path","this","pageIndex","responseType","outlayer","status","history","onLoad","response","proxyElem","createElement","itemsHTML","JSON","parse","hits","map","join","innerHTML","items","querySelectorAll","imagesLoaded","appendItems","appended","layout","addEventListener","event","preventDefault","currentTarget","elements","value","reset","insertAdjacentHTML","on","loadNextPage","target","parentNode","tartgetPhoto","closest","firstElementChild","dataset","alt","basicLightbox","source","show"],"mappings":"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","file":"main.16981fc861104994459b.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"grid-item photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n    <button type=\\\"button\\\" class=\\\"fullscreen-button\\\">\\r\\n        <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n    </button>\\r\\n</div>\";\n},\"useData\":true});","'use strict';\r\nimport 'material-icons';\r\nimport imageLayout from '../hbs/imageLayout.hbs';\r\nexport default function createMarkup(item) {\r\n  return imageLayout(item);\r\n}\r\n","'use strict';\r\nimport createMarkup from './createMarkup';\r\nimport Masonry from 'masonry-layout';\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport imagesLoaded from 'imagesloaded';\r\nimport * as basicLightbox from 'basiclightbox'\r\n\r\nlet keyword;\r\nconst refs = {\r\n    targetform: document.querySelector('#js-search-form'),\r\n    targetGallery: document.querySelector('#js-gallery'),}\r\n\r\nconst msnry = new Masonry( refs.targetGallery, {\r\n      itemSelector: '.grid-item',\r\n      columnWidth: '.grid-sizer',\r\n      percentPosition: true,\r\n      stagger: 30,\r\n      transitionDuration: '0.3s',\r\n      visibleStyle: { transform: 'translateY(0)', opacity: 1 },\r\n      hiddenStyle: { transform: 'translateY(100px)', opacity: 0 },\r\n    });\r\nconst infScroll = new InfiniteScroll( refs.targetGallery, {\r\n  path() {\r\n          return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&q=${keyword}&page=${\r\n            this.pageIndex}&per_page=12&key=13126426-945f384018c76d9f4b98b5024`;\r\n        },\r\n    responseType: 'text',\r\n    outlayer: msnry,\r\n    status: '.page-load-status',\r\n    history: false,\r\n  });\r\n\r\n\r\nrefs.targetform.addEventListener('submit', handelSubmit);\r\nfunction handelSubmit(event) {\r\n  event.preventDefault();\r\n  keyword = event.currentTarget.elements[0].value;\r\n  refs.targetform.reset();\r\n  resetMarkupBeforeQuery(); \r\n  infScroll.on( 'load', onLoad);\r\n  infScroll.loadNextPage();\r\n\r\n}\r\nrefs.targetGallery.addEventListener(\"click\",handleClickOnGalary);\r\nfunction handleClickOnGalary(event){\r\n  if (\r\n    event.target.parentNode === event.currentTarget ||\r\n    event.target === event.currentTarget\r\n  ) {return;}\r\n  const tartgetPhoto=event.target.closest(\".photo-card\").firstElementChild;\r\n  const {dataset:data,alt}=tartgetPhoto;\r\n  const moadlInstance = basicLightbox.create(`\r\n    <img src=\"${data.source}\" width=\"800\" height=\"600\" alt=\"${alt}\">\r\n`);\r\nmoadlInstance.show();\r\n}\r\nfunction resetMarkupBeforeQuery(){\r\n  refs.targetGallery.innerHTML= \"\";\r\n  refs.targetGallery.insertAdjacentHTML(\"afterbegin\",`<div class=\"grid-sizer\"></div><div class=\"gutter-sizer\"></div>`);\r\n  infScroll.pageIndex = 1;\r\n}\r\nfunction onLoad(response) {\r\n  const proxyElem = document.createElement('div');\r\n  const data = JSON.parse(response);\r\n      const itemsHTML = data.hits.map(createMarkup).join('');\r\n      proxyElem.innerHTML = itemsHTML;\r\n      const items = proxyElem.querySelectorAll('.photo-card');\r\n  imagesLoaded( items, function() {\r\n    infScroll.appendItems( items );\r\n    msnry.appended( items );\r\n    msnry.layout();\r\n  });\r\n  \r\n}"],"sourceRoot":""}