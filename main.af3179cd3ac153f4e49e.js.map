{"version":3,"sources":["webpack:///./hbs/imageLayout.hbs","webpack:///./js/createMarkup.js","webpack:///./js/model.js"],"names":["Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","previewURL","call","name","hash","tags","largeImageURL","likes","views","comments","downloads","useData","createMarkup","item","imageLayout","refs","targetform","document","querySelector","targetGallery","addEventListener","event","preventDefault","keyword","currentTarget","elements","value","reset","infScroll","InfiniteScroll","path","this","pageIndex","responseType","outlayer","msnry","status","history","Masonry","itemSelector","columnWidth","percentPosition","stagger","transitionDuration","visibleStyle","transform","opacity","hiddenStyle","items","length","querySelectorAll","remove","off","onLoad","innerHTML","console","log","proxyElem","createElement","response","JSON","parse","itemsHTML","hits","map","join","imagesLoaded","appendItems","appended","on","loadNextPage"],"mappings":"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","file":"main.af3179cd3ac153f4e49e.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"grid-item photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.previewURL || (depth0 != null ? depth0.previewURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"previewURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-imgUrl=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n    <button type=\\\"button\\\" class=\\\"fullscreen-button\\\">\\r\\n        <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n    </button>\\r\\n</div>\";\n},\"useData\":true});","'use strict';\r\nimport 'material-icons';\r\nimport imageLayout from '../hbs/imageLayout.hbs';\r\nexport default function createMarkup(item) {\r\n  return imageLayout(item);\r\n}\r\n","'use strict';\r\nimport createMarkup from './createMarkup';\r\nimport Masonry from 'masonry-layout';\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport imagesLoaded from 'imagesloaded';\r\n{\r\n//   const refs = {\r\n//   targetform: document.querySelector('#js-search-form'),\r\n//   targetGallery: document.querySelector('#js-gallery'),\r\n\r\n//   masonryOptions: {\r\n//     columnWidth: '.grid-sizer',\r\n//     itemSelector: '.grid-item',\r\n//     percentPosition: true,\r\n//     transitionDuration: '0.3s',\r\n//     gutter: '.grid__gutter-sizer',\r\n//     stagger: 30,\r\n//     visibleStyle: { transform: 'translateY(0)', opacity: 1 },\r\n//     hiddenStyle: { transform: 'translateY(100px)', opacity: 0 },\r\n//   },\r\n//   infiniteScrollOptions: {\r\n//     path() {\r\n//       return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=cat&page=${\r\n//         this.pageIndex\r\n//       }&per_page=12&key=13065886-3f8c1539ec248c8d73efef485`;\r\n//     },\r\n//     responseType: 'text',\r\n//     history: false,\r\n//     outlayer: masonryInstance,\r\n//     status: '.page-load-status',\r\n//   },\r\n// };\r\n// const masonryInstance = new Masonry('.grid', refs.masonryOptions);\r\n// const infScrollInstance = new infiniteScroll(\r\n//   refs.targetGallery,\r\n//   refs.infiniteScrollOptions,\r\n// );\r\n\r\n// refs.targetform.addEventListener('submit', handelSubmit);\r\n// function handelSubmit(event) {\r\n//   event.preventDefault();\r\n//   const keyword = event.currentTarget.elements[0].value;\r\n//   refs.targetGallery.innerHTML = '';\r\n//   console.log(keyword);\r\n//   infScrollInstance.pageIndex = 1;\r\n//   infScrollInstance.option={\r\n//     path() {\r\n//       console.log(keyword);\r\n//       return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${keyword}&page=${\r\n//         this.pageIndex\r\n//       }&per_page=12&key=13065886-3f8c1539ec248c8d73efef485`;\r\n//     },\r\n//   };\r\n//   const proxyElem = document.createElement('div');\r\n//   infScrollInstance.on('load', function(response, url) {\r\n//     const data = JSON.parse(response);\r\n//     const itemsHTML = data.hits.map(createMarkup).join('');\r\n//     proxyElem.innerHTML = itemsHTML;\r\n//     const items = proxyElem.querySelectorAll('.photo-card');\r\n//     infScrollInstance.appendItems(items);\r\n//     masonryInstance.appended(items);\r\n//     // imagesLoaded(items, );\r\n//     imagesLoaded( items, function() {\r\n//       infScrollInstance.appendItems( items );\r\n//       masonryInstance.appended( items );\r\n//       masonryInstance.layout();\r\n//     });\r\n    \r\n//   });\r\n//   infScrollInstance.loadNextPage();\r\n// }\r\n}\r\n\r\nconst refs = {\r\n    targetform: document.querySelector('#js-search-form'),\r\n    targetGallery: document.querySelector('#js-gallery'),}\r\n\r\n\r\n\r\n\r\n\r\n\r\nrefs.targetform.addEventListener('submit', handelSubmit);\r\nfunction handelSubmit(event) {\r\n  // console.log(event);\r\n  // console.log(event.currentTarget);\r\n  // console.log(event.target);\r\n    event.preventDefault();\r\n  const keyword = event.currentTarget.elements[0].value;\r\n  refs.targetform.reset();\r\n  const infScroll = new InfiniteScroll( refs.targetGallery, {\r\n    path() {\r\n          return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${keyword}&page=${\r\n            this.pageIndex}&per_page=12&key=13126426-945f384018c76d9f4b98b5024`;\r\n          },\r\n    responseType: 'text',\r\n    outlayer: msnry,\r\n    status: '.page-load-status',\r\n    history: false,\r\n  });\r\n  \r\n  const msnry = new Masonry( refs.targetGallery, {\r\n    itemSelector: '.grid-item',\r\n    columnWidth: '.grid-sizer',\r\n    percentPosition: true,\r\n    stagger: 30,\r\n    transitionDuration: '0.3s',\r\n    visibleStyle: { transform: 'translateY(0)', opacity: 1 },\r\n    hiddenStyle: { transform: 'translateY(100px)', opacity: 0 },\r\n  });\r\n  if(msnry.items.length){\r\n    const items=refs.targetGallery.querySelectorAll(\".photo-card\");\r\n    msnry.remove(items);\r\n    infScroll.off('load',onLoad);\r\nrefs.targetGallery.innerHTML='';\r\n    console.log(msnry);\r\n  };\r\nconst proxyElem = document.createElement('div');\r\ninfScroll.on( 'load', onLoad);\r\n\r\ninfScroll.loadNextPage();\r\nfunction onLoad(response) {\r\n  const data = JSON.parse(response);\r\n      const itemsHTML = data.hits.map(createMarkup).join('');\r\n      proxyElem.innerHTML = itemsHTML;\r\n      const items = proxyElem.querySelectorAll('.photo-card');\r\n  imagesLoaded( items, function() {\r\n    infScroll.appendItems( items );\r\n    msnry.appended( items );\r\n  });\r\n  \r\n}\r\n}\r\n\r\n"],"sourceRoot":""}